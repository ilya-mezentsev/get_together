## Описание архитектуры проекта

### Общая идея
Арихитектура приложения строиться по модели [MVC](https://www.tutorialsteacher.com/mvc/mvc-architecture#:~:text=MVC%20stands%20for%20Model%2C%20View,model%20state%20in%20a%20database.)

В данном случае Model - это сущности в папке `backend/src/services`, реализующие основные бизнес-правила проекта

View - это фронт в браузере

А Controller - это сущности в папке `backend/src/api`, обработчики http-запросов; служат звеном между View и Model

### Model
Структура подпапок `services` (за исключением `errors` и `proxies` - о них позже) отражает бизнес-сущности и задачи, которые нужно решать.
Каждая папка содержит 2 файла (и, возможно, подпапку `plugins` - тоже ниже) - один с реализацией, другой (с постфиксом _test) с тестами реализации.
Папка `errors` - содержит файл со всеми ошибками, которые могут вернуть сервисы (просто набор переменных).
Папка `plugins` - содержит плагины для сервиса; находится в папке с сервисом, т.к. больше нигде не нужна

#### Подпапка `proxies`
Содержит все виды прокси (пока один вид - валидация) для сервисов в виде подпапок (например, `proxies/validation`).
Те, в свою очередь, содержат файлы с реализацие прокси для каждого сервиса (см. паттерн [Proxy](https://refactoring.guru/ru/design-patterns/proxy))

Подпапка `proxies/validation` содержит папку `plugins` - там лежит плагин для валидации (вместе с тестами)

#### Файл `services/factory.go`
Условная "Фабрика" (см. паттерн [Factory](https://refactoring.guru/ru/design-patterns/abstract-factory)) для создания сервисов. Возвращаемы тип является интерфейсом, который реализует сервис (и, что важно, должен реализовывать прокси)
Основная задача - правильно создать сервис, добавив перед ним прокси, избавив клиента от деталей создания сервиса

### View
Здесь пока особо нечего сказать, т.к. фронт пока не готов

### Controller
Папка `backend/src/api` - содержит обработчики для http-запросов.
Основная задача - раскодировать запрос, послать в свой сервис и вернуть ответ сервиса на фронт (успешный или нет - зависит от наличия ошибки, которую вернул сервис при обработке)

### Структура бекенда
* `backend/src/interfaces` - содержит описание интерфейсов, реализуемых различными сущностями. Интерфейсы используются для [DI](https://habr.com/ru/post/191168/)
* `backend/src/internal_errors` - содержит "внутренние" для приложения ошибки (мы их логируем)
* `backend/src/mock` - содержит моки для тестирования всего
* `backend/src/models` - содержит структуры и типы данных, используемые в проекте
* `backend/src/plugins` - содержит плагины для каких-то общих задач (сейчас только логирование)
* `backend/src/repositories` - содержит сущности для доступа к данным в БД
* `backend/src/utils` - содержит всякие полезные маленькие функции общего назначения

#### Repositories
Кроме непосредственной реализации сущностей для доступа к данным содержит папку `decorators`.
В ней лежат декораторы (см. паттерн [Decorator](https://refactoring.guru/design-patterns/decorator)) по своим функциям (напрмер, `logging` для логирования)
На примере декоратора для логирования можно сказать, что он (декоратор) должен быть определен для каждого репозитория, обеспечивая тем самым их единообразную работу.
Хотя, можно определить и добавить декоратор только для одного репозитория, если это необходимо (например, для измерения времени запросов)
Здесь тоже есть файл `factory.go` - нужен для тех же целей, что и фабрика сервисов
